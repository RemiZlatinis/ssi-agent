#!/bin/bash
# Pre-removal script for ssi-agent

set -e

# Stop and disable service before removal
if systemctl is-active --quiet ssi-agent; then
    echo "Stopping ssi-agent..."
    systemctl stop ssi-agent
fi

if systemctl is-enabled --quiet ssi-agent; then
    echo "Disabling ssi-agent..."
    systemctl disable ssi-agent
fi

# Reload systemd daemon
systemctl daemon-reload
